{% load photoalbum_tags %}
{% load project_tags %}
    <div class="card-rounded bg-white d-flex flex-stack flex-wrap">
        <div class="mb-7">
            <div class="mb-6">
                <span class="text-gray-400 fs-7 fw-bolder me-2 d-block lh-1 pb-1">ID фотоальбома: #{{photoalbum.pk}}</span>
                <span class="text-gray-800 text-hover-primary fs-1 fw-bolder"><a href="{% url 'photoalbum_items' photoalbum.pk %}">{{photoalbum.title}}</span>
            </div>
            <div class="d-flex align-items-center flex-wrap d-grid gap-2">
                {% if photoalbum.author %}
                <div class="d-flex align-items-center me-5 me-xl-13">
                    <div class="symbol symbol-30px symbol-circle me-3">
                        {% if photoalbum.author.profile.photo %}
                        <img src="{{photoalbum.author.profile.photo.url}}">
                        {% else %}
                        <div class="symbol symbol-30px symbol-circle">
                            <span class="symbol-label bg-primary">
                                <span class="svg-icon svg-icon-5 svg-icon-white">
                                    {{photoalbum.author.first_name|upfirstletter}}
                                </span>
                            </span>
                        </div>
                        {% endif %}
                    </div>
                    <div class="m-0">
                        <span class="fw-bold text-gray-400 d-block fs-8">Автор</span>
                        <a href="{% url 'profile_view' photoalbum.author.pk %}" class="fw-bolder text-gray-800 text-hover-primary fs-7">{{photoalbum.author.first_name}} {{photoalbum.author.last_name}}</a>
                    </div>
                </div>
                {% endif %}
                <div class="d-flex align-items-center me-5">
                    <div class="symbol symbol-30px symbol-circle me-3">
                        <span class="symbol-label bg-warning">
                            <span class="svg-icon svg-icon-5 svg-icon-white">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                    <path d="M18 21.6C16.6 20.4 9.1 20.3 6.3 21.2C5.7 21.4 5.1 21.2 4.7 20.8L2 18C4.2 15.8 10.8 15.1 15.8 15.8C16.2 18.3 17 20.5 18 21.6ZM18.8 2.8C18.4 2.4 17.8 2.20001 17.2 2.40001C14.4 3.30001 6.9 3.2 5.5 2C6.8 3.3 7.4 5.5 7.7 7.7C9 7.9 10.3 8 11.7 8C15.8 8 19.8 7.2 21.5 5.5L18.8 2.8Z" fill="currentColor"></path>
                                    <path opacity="0.3" d="M21.2 17.3C21.4 17.9 21.2 18.5 20.8 18.9L18 21.6C15.8 19.4 15.1 12.8 15.8 7.8C18.3 7.4 20.4 6.70001 21.5 5.60001C20.4 7.00001 20.2 14.5 21.2 17.3ZM8 11.7C8 9 7.7 4.2 5.5 2L2.8 4.8C2.4 5.2 2.2 5.80001 2.4 6.40001C2.7 7.40001 3.00001 9.2 3.10001 11.7C3.10001 15.5 2.40001 17.6 2.10001 18C3.20001 16.9 5.3 16.2 7.8 15.8C8 14.2 8 12.7 8 11.7Z" fill="currentColor"></path>
                                </svg>
                            </span>
                        </span>
                    </div>
                    <div class="m-0">
                        <span class="fw-bold text-gray-400 d-block fs-8">Количество фотографий</span>
                        <span class="fw-bolder text-gray-800 text-hover-primary fs-7">{{photoalbum_items_count}}</span>
                    </div>
                </div>
                <div class="d-flex align-items-center me-5">
                    <div class="symbol symbol-30px symbol-circle me-3">
                        <span class="symbol-label bg-danger">
                            <span class="svg-icon svg-icon-5 svg-icon-white">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                    <path d="M18 21.6C16.6 20.4 9.1 20.3 6.3 21.2C5.7 21.4 5.1 21.2 4.7 20.8L2 18C4.2 15.8 10.8 15.1 15.8 15.8C16.2 18.3 17 20.5 18 21.6ZM18.8 2.8C18.4 2.4 17.8 2.20001 17.2 2.40001C14.4 3.30001 6.9 3.2 5.5 2C6.8 3.3 7.4 5.5 7.7 7.7C9 7.9 10.3 8 11.7 8C15.8 8 19.8 7.2 21.5 5.5L18.8 2.8Z" fill="currentColor"></path>
                                    <path opacity="0.3" d="M21.2 17.3C21.4 17.9 21.2 18.5 20.8 18.9L18 21.6C15.8 19.4 15.1 12.8 15.8 7.8C18.3 7.4 20.4 6.70001 21.5 5.60001C20.4 7.00001 20.2 14.5 21.2 17.3ZM8 11.7C8 9 7.7 4.2 5.5 2L2.8 4.8C2.4 5.2 2.2 5.80001 2.4 6.40001C2.7 7.40001 3.00001 9.2 3.10001 11.7C3.10001 15.5 2.40001 17.6 2.10001 18C3.20001 16.9 5.3 16.2 7.8 15.8C8 14.2 8 12.7 8 11.7Z" fill="currentColor"></path>
                                </svg>
                            </span>
                        </span>
                    </div>
                    <div class="m-0">
                        <span class="fw-bold text-gray-400 d-block fs-8">Категория</span>
                        <a href="{% url 'photoalbum_by_category' photoalbum.category.pk %}" class="fw-bolder text-gray-800 text-hover-primary fs-7">{{photoalbum.category.title}}</a>
                    </div>
                </div>
                {% if photoalbum.event_at %}
                <div class="d-flex align-items-center me-5">
                    <div class="symbol symbol-30px symbol-circle me-3">
                        <span class="symbol-label bg-success">
                            <span class="svg-icon svg-icon-5 svg-icon-white">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                    <path d="M18 21.6C16.6 20.4 9.1 20.3 6.3 21.2C5.7 21.4 5.1 21.2 4.7 20.8L2 18C4.2 15.8 10.8 15.1 15.8 15.8C16.2 18.3 17 20.5 18 21.6ZM18.8 2.8C18.4 2.4 17.8 2.20001 17.2 2.40001C14.4 3.30001 6.9 3.2 5.5 2C6.8 3.3 7.4 5.5 7.7 7.7C9 7.9 10.3 8 11.7 8C15.8 8 19.8 7.2 21.5 5.5L18.8 2.8Z" fill="currentColor"></path>
                                    <path opacity="0.3" d="M21.2 17.3C21.4 17.9 21.2 18.5 20.8 18.9L18 21.6C15.8 19.4 15.1 12.8 15.8 7.8C18.3 7.4 20.4 6.70001 21.5 5.60001C20.4 7.00001 20.2 14.5 21.2 17.3ZM8 11.7C8 9 7.7 4.2 5.5 2L2.8 4.8C2.4 5.2 2.2 5.80001 2.4 6.40001C2.7 7.40001 3.00001 9.2 3.10001 11.7C3.10001 15.5 2.40001 17.6 2.10001 18C3.20001 16.9 5.3 16.2 7.8 15.8C8 14.2 8 12.7 8 11.7Z" fill="currentColor"></path>
                                </svg>
                            </span>
                        </span>
                    </div>
                    <div class="m-0">
                        <span class="fw-bold text-gray-400 d-block fs-8">Дата события</span>
                        <span class="fw-bolder text-gray-800 text-hover-primary fs-7">{{photoalbum.event_at}}</span>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
        <div class="d-flex flex-wrap gap-2 justify-content-between">
            <div class="d-flex flex-stack fs-4">
                <div class="rotate collapsible btn btn-light-primary btn-sm" data-bs-toggle="collapse" href="#kt_user_view_details" role="button" aria-expanded="true" aria-controls="kt_user_view_details">Добавить фотографии
                    <span class="ms-2 rotate-180">
                        <span class="svg-icon svg-icon-3">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M11.4343 12.7344L7.25 8.55005C6.83579 8.13583 6.16421 8.13584 5.75 8.55005C5.33579 8.96426 5.33579 9.63583 5.75 10.05L11.2929 15.5929C11.6834 15.9835 12.3166 15.9835 12.7071 15.5929L18.25 10.05C18.6642 9.63584 18.6642 8.96426 18.25 8.55005C17.8358 8.13584 17.1642 8.13584 16.75 8.55005L12.5657 12.7344C12.2533 13.0468 11.7467 13.0468 11.4343 12.7344Z" fill="currentColor"/>
                            </svg>
                        </span>
                    </span>
                </div>
            </div>
            <button class="btn btn-sm btn-icon btn-bg-light btn-active-color-primary show menu-dropdown" data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end">
                <i class="bi bi-three-dots fs-3"></i>
            </button>
            <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-800 menu-state-bg-light-primary fw-bold w-200px py-3" data-kt-menu="true" data-popper-placement="bottom-end" style="z-index: 105; position: fixed; inset: 0px 0px auto auto; margin: 0px; transform: translate3d(-60px, 226px, 0px);">
                <div class="menu-item px-3">
                    <div class="menu-content text-muted pb-2 px-3 fs-7 text-uppercase">Payments</div>
                </div>
                <div class="menu-item px-3">
                    <a href="{% url 'photoalbum_update' photoalbum.pk %}" class="menu-link px-3">Редактировать альбом</a>
                </div>
                <div class="menu-item px-3">
                    <a href="{% url 'photoalbum_items_edit_mode' photoalbum.pk %}" class="menu-link px-3">Редактирование фотографий</a>
                </div>
                <div class="menu-item px-3 my-1">
                    <a type="submit" class="menu-link px-3" data-bs-toggle="modal" data-bs-target="#kt_modal_delete_photoalbum">Удалить</a>
                </div>
            </div>
            <div class="modal fade" tabindex="-1" id="kt_modal_delete_photoalbum">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 class="modal-title">Вы подтверждаете удаление?</h3>
                            <!--begin::Close-->
                            <div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal" aria-label="Close">
                                <span class="svg-icon svg-icon-1"></span>
                            </div>
                            <!--end::Close-->
                        </div>
                        <div class="modal-body">
                            <p class="text-dark">Удаление фотоальбома не подлежит восстановлению.
                                Все фотографии, которые были добавлены в этот фотоальбом будут удалены.
                                Вы подтверждаете удаление?</p>
                        </div>
                        <div class="modal-footer">
                            <form action="{% url 'photoalbum_delete' photoalbum.pk %}" class="mb-0" method="POST">
                            {% csrf_token %}
                                <button type="button" class="btn btn-light" data-bs-dismiss="modal">Отмена</button>
                                <button type="submit" class="rotate collapsible btn btn-light-danger">Удалить альбом</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="separator separator-dotted border-gray-500 mb-5"></div>
    {% show_photoalbum_item_upload photoalbum.pk %}

